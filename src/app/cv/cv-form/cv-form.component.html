<section>
  <form (change)="setData()">
    <a class="unfold" (click)="openAll()"><i class="fas fa-angle-double-down"></i></a>
    <a
      data-toggle="collapse"
      href="#title"
      role="button"
      aria-expanded="false"
      aria-controls="title">
      <h3>
        <i class="fas fa-chevron-circle-down"></i> Title
      </h3>
    </a>
    <div class="collapse" id="title">
      <input type="text" name="title" required placeholder="cv title*" [(ngModel)]="cv.title"/>
      <input type="text" name="first_name" required placeholder="first name*" [(ngModel)]="cv.firstName"/>
      <input type="text" name="last_name" required placeholder="last name*" [(ngModel)]="cv.lastName"/>
      <input type="text" name="birthday" type="date" placeholder="birthday" [(ngModel)]="cv.birthday"/>
      <textarea name="summary" id="summary" required placeholder="summary*" [(ngModel)]="cv.summary"></textarea>
      <textarea name="about" id="about" required placeholder="about*" [(ngModel)]="cv.about"></textarea>
    </div>

    <!--<a-->
      <!--data-toggle="collapse"-->
      <!--href="#experience"-->
      <!--role="button"-->
      <!--aria-expanded="false"-->
      <!--aria-controls="experience">-->
      <!--<h3>-->
        <!--<i class="fas fa-chevron-circle-down"></i> Experience-->
      <!--</h3>-->
    <!--</a>-->
    <!--<div class="collapse" id="experience">-->
      <!--<div *ngFor="let experience of cv['prof_info']['experience']; let i = index">-->
        <!--<input type="text" name="position_{{i}}" placeholder="position"-->
               <!--[(ngModel)]="cv['prof_info']['experience'][i]['position']"/>-->
        <!--<input type="text" name="exp_years_{{i}}" placeholder="experience years"-->
               <!--[(ngModel)]="cv['prof_info']['experience'][i]['years']"/>-->
      <!--</div>-->
      <!--<div>-->
        <!--<button class="add-btn" (click)="addExperience()">-->
          <!--<i class="fas fa-plus fa-2x"></i>-->
        <!--</button>-->
      <!--</div>-->
    <!--</div>-->

    <a
      data-toggle="collapse"
      href="#contacts"
      role="button"
      aria-expanded="false"
      aria-controls="contacts">
      <h3><i class="fas fa-chevron-circle-down"></i> Contact info</h3>
    </a>
    <div class="collapse" id="contacts">
      <!--<input type="text" name="residence" placeholder="residence"/>-->
      <input type="text" name="phone" required placeholder="phone*" [(ngModel)]="cv.phone"/>
      <input type="email" name="email" required [email]="true" placeholder="email*" [(ngModel)]="cv.email"/>
      <input type="text"
             placeholder="residence"
             autocorrect="off"
             autocapitalize="off"
             spellcheck="off"
             class="form-control"
             #searchResidence
             [(ngModel)]="cv.residence"
             [ngModelOptions]="{standalone: true}"
             (blur)="setData()">
      <!--<agm-cv></agm-cv>-->
    </div>

    <a
      data-toggle="collapse"
      href="#desc"
      role="button"
      aria-expanded="false"
      aria-controls="desc">
      <h3><i class="fas fa-chevron-circle-down"></i> Decsription</h3>
    </a>
    <div class="collapse" id="desc">
      <input type="text" name="choose_preferable_area" [(ngModel)]="cv.preferencedArea" placeholder="choose preferable area"/>
      <!--<select name="preference_position" placeholder="Choose an option" [(ngModel)]="cv.positionPreference.id">-->
        <!--<option disabled>Select preference position</option>-->
        <!--<option *ngFor="let pos of positions" [selected]="cv.positionPreference.id == pos.id" [value]="pos.id">{{ pos.position }}</option>-->
      <!--</select>-->
      <input type="text" name="choose_position" placeholder="choose preferable position"
             [(ngModel)]="cv.position_preference"/>
      <input type="number" name="salary_from" [(ngModel)]="cv.salaryFromPreference" placeholder="Salary from ($)"/>
      <input type="number" name="salary_till" [(ngModel)]="cv.salaryTillPreference" placeholder="Salary till ($)"/>
    </div>

    <a
      data-toggle="collapse"
      href="#education"
      role="button"
      aria-expanded="false"
      aria-controls="education">
      <h3><i class="fas fa-chevron-circle-down"></i> Education</h3>
    </a>
    <div class="collapse" id="education">
      <div *ngFor="let edu of cv.education; let i = index">
        <input type="text" name="school_institution_name_{{i}}" placeholder="school/institution name*"
               [(ngModel)]="cv.education[i].institution"/>
        <input type="text" name="degree_{{i}}" placeholder="degree*"
               [(ngModel)]="cv.education[i].degree"/>
        <input type="text" name="graduation_year_{{i}}" placeholder="graduation year*"
               [(ngModel)]="cv.education[i].yearEnd"/>
        <!--<input type="text" name="location_{{i}}" placeholder="location"-->
               <!--[(ngModel)]="cv.education[i].location"/>-->
        <textarea name="edu_description_{{i}}" placeholder="description"
                  [(ngModel)]="cv.education[i].note"></textarea>
      </div>
      <div>
        <button class="add-btn" (click)="addEducation()">
          <i class="fas fa-plus fa-2x"></i>
        </button>
      </div>
    </div>

    <a
      data-toggle="collapse"
      href="#skills"
      role="button"
      aria-expanded="false"
      aria-controls="skills">
      <h3><i class="fas fa-chevron-circle-down"></i> Skills</h3>
    </a>
    <div class="collapse" id="skills">
      <select name="skills" multiple [compareWith]="compareFn" size="7" [(ngModel)]="cv.skills">
          <option *ngFor="let skill of skills; let i = index" [ngValue]="skill">
            {{skill.nameSkill}}
          </option>
      </select>
    </div>

    <a
      data-toggle="collapse"
      href="#projects"
      role="button"
      aria-expanded="false"
      aria-controls="projects">
      <h3><i class="fas fa-chevron-circle-down"></i> Projects / Jobs</h3>
    </a>
    <div class="collapse" id="projects">
      <div *ngFor="let job of cv.cvJobs; let i = index">
        <input type="text" name="company_{{i}}" placeholder="company" [(ngModel)]="cv.cvJobs[i].company"/>
        <!--<input type="text" name="company_{{i}}" placeholder="position" [(ngModel)]="cv.cvJobs[i].position.position"/>-->
        <input name="preference_position" placeholder="position" [(ngModel)]="cv.cvJobs[i].position">

        <label for="formControlRange_{{i}}">Frontend / Backend</label>
        <input
          type="range"
          name="range_{{i}}"
          class="form-control-range"
          id="formControlRange_{{i}}"
          [(ngModel)]="cv.cvJobs[i].backFront">
        <input type="number" name="date_from_{{i}}" [(ngModel)]="cv.cvJobs[i].yearStart" placeholder="year from"/>
        <input type="number" name="date_till_{{i}}" [(ngModel)]="cv.cvJobs[i].yearEnd" placeholder="year till"/>
        <textarea name="project_description_{{i}}" placeholder="project description"
                  [(ngModel)]="cv.cvJobs[i].description"></textarea>
      </div>
      <div>
        <button class="add-btn" (click)="addJob()">
          <i class="fas fa-plus fa-2x"></i>
        </button>
      </div>
    </div>

    <a
      data-toggle="collapse"
      href="#achievements"
      role="button"
      aria-expanded="false"
      aria-controls="achievements">
      <h3><i class="fas fa-chevron-circle-down"></i> Achievements</h3>
    </a>
    <div class="collapse" id="achievements">
      <div *ngFor="let a of cv.cvAchievements; let i = index; trackBy:trackByFn">
        <textarea name="achievement_{{i}}" placeholder="description"
                  [(ngModel)]="cv.cvAchievements[i].description"></textarea>
        <input type="number" name="achievement_date_end_{{i}}" placeholder="graduation year" [(ngModel)]="cv.cvAchievements[i].yearEnd"/>
      </div>
      <div>
        <button class="add-btn" (click)="addAchivement()">
          <i class="fas fa-plus fa-2x"></i>
        </button>
      </div>
    </div>

    <a
      data-toggle="collapse"
      href="#certifications"
      role="button"
      aria-expanded="false"
      aria-controls="certifications">
      <h3><i class="fas fa-chevron-circle-down"></i> Certifications</h3>
    </a>
    <div class="collapse" id="certifications">
      <div *ngFor="let certificate of cv.cvCertification; let i = index; trackBy:trackByFn">
        <textarea name="certification_{{i}}" placeholder="description"
                  [(ngModel)]="cv.cvCertification[i].description"></textarea>
        <input type="number" name="certification_date_end_{{i}}" placeholder="graduation year" [(ngModel)]="cv.cvCertification[i].yearEnd"/>
      </div>
      <div>
        <button class="add-btn" (click)="addCertification()">
          <i class="fas fa-plus fa-2x"></i>
        </button>
      </div>
    </div>

    <a
      data-toggle="collapse"
      href="#languages"
      role="button"
      aria-expanded="false"
      aria-controls="languages">
      <h3><i class="fas fa-chevron-circle-down"></i> Languages</h3>
    </a>
    <div class="collapse" id="languages">
      <div *ngFor="let language of cv.languages; let i = index; trackBy:trackByFn">
        <select name="language_{{i}}" [(ngModel)]="cv.languages[i]">
          <option disabled>Select language</option>
          <option *ngFor="let lg of languages" [ngValue]="lg" [selected]="cv.languages[i].id == lg.id">{{ lg.nameLang }}</option>
        </select>
        <!--<input type="text" name="language_{{i}}" placeholder="language {{i+1}}"-->
               <!--[(ngModel)]="cv.languages[i].nameLang"/>-->
      </div>
      <div>
        <button class="add-btn" (click)="addLanguage()">
          <i class="fas fa-plus fa-2x"></i>
        </button>
      </div>
    </div>

    <a
      data-toggle="collapse"
      href="#links"
      role="button"
      aria-expanded="false"
      aria-controls="links">
      <h3><i class="fas fa-chevron-circle-down"></i> Footer links</h3>
    </a>
    <div class="collapse" id="links">
      <input type="text" name="linkedin_link" placeholder="linkedin link" [(ngModel)]="cv.linkedin"/>
      <input type="text" name="footer_link_github" placeholder="github" [(ngModel)]="cv.github"/>
      <input type="text" name="footer_link_portfolio" placeholder="portfolio" [(ngModel)]="cv.portfolio"/>
    </div>

    <a
      data-toggle="collapse"
      href="#info"
      role="button"
      aria-expanded="false"
      aria-controls="info">
      <h3><i class="fas fa-chevron-circle-down"></i> Footer info</h3>
    </a>
    <div class="collapse" id="info">
      <textarea name="recommendation" placeholder="recommendation"
                [(ngModel)]="cv.recommendations"></textarea>
    </div>

  </form>
</section>